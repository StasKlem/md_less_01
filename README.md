# Go Chat CLI

–ö–æ–Ω—Å–æ–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ Go –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –æ—Ç–≤–µ—Ç–æ–≤ AI API —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏ –∏ –±–µ–∑ –Ω–∏—Ö. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç RouterAI API (—Å–æ–≤–º–µ—Å—Ç–∏–º —Å OpenAI API).

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–ü—Ä–æ–µ–∫—Ç –ø–æ—Å—Ç—Ä–æ–µ–Ω —Å–æ–≥–ª–∞—Å–Ω–æ –ø—Ä–∏–Ω—Ü–∏–ø–∞–º **Clean Architecture**:

```
internal/
‚îú‚îÄ‚îÄ api/              # –†–∞–±–æ—Ç–∞ —Å API
‚îÇ   ‚îú‚îÄ‚îÄ interfaces.go # –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã (ChatClient, HTTPDoer, RequestBuilder, ResponseParser)
‚îÇ   ‚îú‚îÄ‚îÄ types.go      # –°—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö (Request, Response, Message)
‚îÇ   ‚îú‚îÄ‚îÄ builder.go    # ChatRequestBuilder (immutable)
‚îÇ   ‚îú‚îÄ‚îÄ client.go     # HTTPChatClient —Å context
‚îÇ   ‚îú‚îÄ‚îÄ parser.go     # JSONResponseParser
‚îÇ   ‚îî‚îÄ‚îÄ comparison.go # –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤
‚îú‚îÄ‚îÄ config/           # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ config.go     # –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑ env vars
‚îî‚îÄ‚îÄ ui/               # UI —Ñ—É–Ω–∫—Ü–∏–∏
    ‚îî‚îÄ‚îÄ ui.go         # –í–≤–æ–¥/–≤—ã–≤–æ–¥
```

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- **–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã**: –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –¥–ª—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ mock-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- **Context**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `context.Context` –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç–∞–π–º–∞—É—Ç–∞–º–∏ –∏ –æ—Ç–º–µ–Ω–æ–π –∑–∞–ø—Ä–æ—Å–æ–≤
- **Immutable Builder**: –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ builder'–∞
- **–ß–∏—Å—Ç–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏**: HTTPClient, RequestBuilder, ResponseParser —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:
```bash
git clone <repo-url>
cd Golang/md
```

2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω Go 1.18+.

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –∏–ª–∏ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è:

```bash
export ROUTERAI_API_KEY="your-api-key"
```

## –ó–∞–ø—É—Å–∫

```bash
go run main.go
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
2. –í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
3. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç **–¥–≤–∞ –∑–∞–ø—Ä–æ—Å–∞**:
   - **–° –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏**: max_tokens=500, stop sequences `[END]`, `[STOP]`, —Å–∏—Å—Ç–µ–º–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
   - **–ë–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π**: max_tokens=4096, –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π
4. –ü–æ–ª—É—á–∏—Ç–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –¥–≤—É—Ö –æ—Ç–≤–µ—Ç–æ–≤ —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏

## –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —Å—Ä–∞–≤–Ω–µ–Ω–∏—è

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç –¥–≤–∞ –æ—Ç–≤–µ—Ç–∞:
- –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–∞–∂–¥–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞
- –î–ª–∏–Ω—É –æ—Ç–≤–µ—Ç–∞ –≤ —Å–∏–º–≤–æ–ª–∞—Ö
- –ü—Ä–∏–º–µ—Ä–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–∫–µ–Ω–æ–≤
- –í–∏–∑—É–∞–ª—å–Ω–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤ (–µ—Å–ª–∏ —Ç–µ–∫—Å—Ç > 500 —Å–∏–º–≤–æ–ª–æ–≤, –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –Ω–∞—á–∞–ª–æ –∏ –∫–æ–Ω–µ—Ü)

## –ü—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã

```
–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ: –†–∞—Å—Å–∫–∞–∂–∏ –ø—Ä–æ Go

üîÑ –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ –° –û–ì–†–ê–ù–ò–ß–ï–ù–ò–Ø–ú–ò...
‚Üí Request JSON:
{
  "model": "deepseek/deepseek-v3.2",
  "messages": [
    {
      "role": "system",
      "content": "–û—Ç–≤–µ—Ç—å –∫—Ä–∞—Ç–∫–æ –∏ –ø–æ –¥–µ–ª—É..."
    },
    {
      "role": "user",
      "content": "–†–∞—Å—Å–∫–∞–∂–∏ –ø—Ä–æ Go"
    }
  ],
  "max_tokens": 500,
  "stop": ["[END]", "[STOP]"]
}

üîÑ –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ –ë–ï–ó –û–ì–†–ê–ù–ò–ß–ï–ù–ò–ô...
‚Üí Request JSON:
{
  "model": "deepseek/deepseek-v3.2",
  "messages": [
    {
      "role": "user",
      "content": "–†–∞—Å—Å–∫–∞–∂–∏ –ø—Ä–æ Go"
    }
  ],
  "max_tokens": 4096
}

============================================================
–°–†–ê–í–ù–ï–ù–ò–ï –û–¢–í–ï–¢–û–í
============================================================

üìã –ó–ê–ü–†–û–° 1 (—Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏):
   –í—Ä–µ–º—è: 1.234s
   –î–ª–∏–Ω–∞: 234 —Å–∏–º–≤–æ–ª–æ–≤
   –¢–æ–∫–µ–Ω–æ–≤ (–ø—Ä–∏–º–µ—Ä–Ω–æ): 58
   –û—Ç–≤–µ—Ç:
   --------------------------------------------------
   Go ‚Äî —è–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Ç Google...

üìã –ó–ê–ü–†–û–° 2 (–±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π):
   –í—Ä–µ–º—è: 2.567s
   –î–ª–∏–Ω–∞: 1845 —Å–∏–º–≤–æ–ª–æ–≤
   –¢–æ–∫–µ–Ω–æ–≤ (–ø—Ä–∏–º–µ—Ä–Ω–æ): 461
   –û—Ç–≤–µ—Ç:
   --------------------------------------------------
   Go (–∏–ª–∏ Golang) ‚Äî –∫–æ–º–ø–∏–ª–∏—Ä—É–µ–º—ã–π...
   <–≤—ã—Ä–µ–∑–∞–Ω—ã–π —Ç–µ–∫—Å—Ç>
   ...–¥–ª—è –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ–≥–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è.

============================================================
–†–ê–ó–ù–ò–¶–ê:
   –î–ª–∏–Ω–∞: 1611 —Å–∏–º–≤–æ–ª–æ–≤
   –í—Ä–µ–º—è: 1.333s
============================================================
```

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ | –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é |
|------------|----------|----------------------|
| `ROUTERAI_API_KEY` | API –∫–ª—é—á –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ | *–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ* |
| `ROUTERAI_API_URL` | URL endpoint API | `https://routerai.ru/api/v1/chat/completions` |
| `ROUTERAI_MODEL` | –ú–æ–¥–µ–ª—å –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è | `deepseek/deepseek-v3.2` |

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Go 1.18+
- API –∫–ª—é—á RouterAI
- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

- `main.go` ‚Äî —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞, orchestration
- `internal/api/` ‚Äî –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã —Å API
- `internal/config/` ‚Äî –∑–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- `internal/ui/` ‚Äî –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –ø–æ–∑–≤–æ–ª—è—é—Ç –ª–µ–≥–∫–æ mock'–∏—Ä–æ–≤–∞—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

```go
// –ü—Ä–∏–º–µ—Ä mock –¥–ª—è HTTPDoer
type MockHTTPClient struct {
    Response *http.Response
    Error    error
}

func (m *MockHTTPClient) Do(req *http.Request) (*http.Response, error) {
    return m.Response, m.Error
}
```

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT
