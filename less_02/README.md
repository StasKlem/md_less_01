Возможно я не правильно понял что в итоге должно получиться.
# варант 1
В этом варианте llm соблюдает формат ответа. Отвечает в заданом формате `json`. Формат задан через
```
"role": "system",
      "content": "Ты робот для заказа пиццы. Твоя задача - помочь пользователю составить пиццу.\nПользователь будет называть ингредиенты, которые он хочет добавить в пиццу.\nТы должен отвечать ТОЛЬКО в формате JSON:\n{\n\t\"message\": \"твое сообщение пользователю\",\n\t\"pizza\": [\"ингредиент1\", \"ингредиент2\", ...]\n}\n\nВ массив pizza включай все ингредиенты, которые назвал пользователь за все время общения.\nКогда пользователь пишет \"Все\", это значит что он закончил заказ. В этом случае ответь:\n{\n\t\"message\": \"Заказ принят\",\n\t\"pizza\": [\"список всех ингредиентов\"]\n}\n\nНе добавляй никакого текста кроме JSON."
```
код - [less_02](https://github.com/StasKlem/md_less_01/tree/main/less_02)
видео -  [диск](https://disk.yandex.ru/i/qk02WJMb66oO9w)

# вариант 2
В предыдущем приложении я сделал ограничение на ответ от `llm` через `"max_tokens": 500` и `"stop": ["[END]","[STOP]"]` и сравнил ответ на один и тот же запрос

код - [less_01](https://github.com/StasKlem/md_less_01/tree/main/less_01)
видео - [диск](https://disk.yandex.ru/i/Y1rRXT8BlV6V9g)
```
  "max_tokens": 500,
  "stop": [
    "[END]",
    "[STOP]"
  ]
```

```
{
      "role": "system",
      "content": "Ответь кратко и по делу. Заверши ответ маркером \u003cEND\u003e. Используй не более 2-3 предложений."
    },
```

